{"mappings":"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","sources":["src/components/Common.block/Card/card.js"],"sourcesContent":["import {\n    showEditMenu,\n    showWarning,\n    modalTitle,\n    modalDesc,\n    modalWrapper,\n    currentUserName,\n\n} from '../modal/modal';\n\nlet actionAdd = false;\nlet currentTaskEditId = 0;\nconst todos = [];\nconst progress = [];\nconst done = [];\nexport const btnAddTodo = document.querySelector('.item-todo__button-add-todo');\nexport function addTodo() {\n    actionAdd = true;\n    showEditMenu();\n}\n\nfunction randomRGB() {\n    const r = Math.floor(Math.random() * (256)),\n          g = Math.floor(Math.random() * (256)),\n          b = Math.floor(Math.random() * (256)),\n          color = `#${r.toString(16)}${g.toString(16)}${b.toString(16)}`;\n    return color\n}\n\nfunction deleteCard({target}) {\n    const card = target.parentNode.parentNode.parentNode\n    const cardId = +card.getAttribute('id');\n    const cardIdx = todos.findIndex(({id}) => id === cardId);\n    todos.splice(cardIdx, 1);\n    renderTask(todos, '.todos-list');\n}\n\nfunction onEdit({target}) {\n    const item = target.parentNode.parentNode.parentNode;\n    const itemId = +item.getAttribute('id');\n    currentTaskEditId = itemId;\n    const title = item.querySelector('.tasks-list__item-title').innerHTML;\n    const desc = item.querySelector('.tasks-list__item-desc').innerHTML;\n    modalTitle.value = title;\n    modalDesc.value = desc;\n    actionAdd = false;\n    showEditMenu();\n\n}\n\nfunction renderCounter(list, currentList) {\n    let counter = document.querySelector(currentList);\n    counter.innerText = list.length;\n}\nfunction jumpToProgress({ target }) {\n    const item = target.parentNode.parentNode;\n    const idItem = +item.getAttribute('id');\n    const indexItem = todos.findIndex(({id}) => id === idItem);\n    progress.push(todos[indexItem])\n    todos.splice(indexItem, 1);\n    renderTask(todos,'.todos-list');\n    renderTask(progress, '.progress-list');\n\n}\n\nfunction renderTask(list, currentList) {\n    const tasksList = document.querySelector(currentList);\n    tasksList.innerHTML = '';\n    list.forEach(({id, titleTask, description, time, colorItem, userName}) => {\n        const task = document.createElement('li');\n        task.classList.add('tasks-list__item');\n        task.setAttribute('id', id);\n        task.setAttribute('draggable', true);\n        task.style.background = colorItem;\n\n        // titles \n        const titlesBlock = document.createElement('div');\n        titlesBlock.classList.add('tasks-list__item-titles');\n        \n        // title \n\n        const title = document.createElement('p');\n        title.classList.add('tasks-list__item-title');\n        title.innerText = titleTask;\n\n        // desc\n\n        const desc = document.createElement('p');\n        desc.classList.add('tasks-list__item-desc');\n        desc.innerText = description;\n\n        // user \n        const user = document.createElement('p');\n        user.classList.add('tasks-list__item-user');\n        user.innerText = userName;\n\n        // actions \n\n        const actionsBlock = document.createElement('div');\n        actionsBlock.classList.add('tasks-list__item-actions');\n\n        // editing block\n\n        const editBlock = document.createElement('div');\n        editBlock.classList.add('tasks-list__item-actions-editing');\n\n        // buttons\n        if (currentList === '.todos-list') {\n            const btnEdit = document.createElement('button');\n            btnEdit.classList.add('tasks-list__item-actions-edit');\n            btnEdit.classList.add('button-card');\n            btnEdit.innerHTML = 'Edit';\n            btnEdit.addEventListener('click', onEdit);\n\n            const btnDelete = document.createElement('button');\n            btnDelete.classList.add('tasks-list__item-actions-delete');\n            btnDelete.classList.add('button-card');\n            btnDelete.innerHTML = 'Delete';\n            btnDelete.addEventListener('click', deleteCard);\n\n            const btnJump = document.createElement('button');\n            btnJump.classList.add('tasks-list__item-actions-jump');\n            btnJump.classList.add('button-card');\n            btnJump.innerHTML = '>';\n            btnJump.addEventListener('click', jumpToProgress);\n\n            editBlock.append(btnEdit);\n            editBlock.append(btnDelete);\n            actionsBlock.append(editBlock);\n            actionsBlock.append(btnJump);\n\n\n        }\n        else if (currentList === '.progress-list') {\n            const btnBack = document.createElement('button')\n            btnBack.classList.add('tasks-list__item-actions-back');\n            btnBack.classList.add('button-card');\n            btnBack.innerHTML = 'Back';\n\n            const btnComplete = document.createElement('button');\n            btnComplete.classList.add('tasks-list__item-actions-complete');\n            btnComplete.classList.add('button-card');\n            btnComplete.innerHTML = 'Complete';\n\n            editBlock.append(btnBack);\n            editBlock.append(btnComplete);\n            actionsBlock.append(editBlock);\n\n\n        }\n        else if (currentList === '.done-list') {\n            const btnDelete = document.createElement('button');\n            btnDelete.classList.add('tasks-list__item-actions-delete');\n            btnDelete.classList.add('button-card');\n            btnDelete.innerHTML = 'Delete';\n            btnDelete.addEventListener('click', deleteCard);\n\n            editBlock.append(btnDelete);\n            actionsBlock.append(editBlock);\n\n        }\n\n        // time \n\n        const timeCreate = document.createElement('p');\n        timeCreate.classList.add('tasks-list__item-actions-time');\n        timeCreate.innerHTML = time;\n\n        // composite to list\n\n        // titles \n        titlesBlock.append(title);\n        titlesBlock.append(desc);\n        titlesBlock.append(user);\n\n        // actions\n        actionsBlock.append(timeCreate);\n        \n        // task \n        task.append(titlesBlock);\n        task.append(actionsBlock);\n\n        // list \n        tasksList.append(task);\n\n        })\n    renderCounter(todos, '.todos-counter');\n    renderCounter(done, '.done-counter');\n    renderCounter(progress, '.progress-counter');\n\n        \n\n}\n\nexport function onConfirm()  {\n    if (actionAdd) {\n        let options = {\n            hour: 'numeric',\n            minute: 'numeric',\n        }\n        let date = new Date();\n        let color = randomRGB();\n        let todo = {\n            id: Date.now(),\n            titleTask: modalTitle.value,\n            description: modalDesc.value,\n            time: date.toLocaleString('ru', options),\n            colorItem: color,\n            userName: currentUserName,\n        }\n\n        todos.push(todo);\n\n    } else {\n        let currentTaskIdx = todos.findIndex(task => task.id === currentTaskEditId)\n        todos[currentTaskIdx].titleTask = modalTitle.value;\n        todos[currentTaskIdx].description = modalDesc.value;\n        todos[currentTaskIdx].userName = currentUserName;    }\n    renderTask(todos,'.todos-list');\n    modalWrapper.classList.remove('active');\n    modalTitle.value = '';\n    modalDesc.value = '';\n}\n\n\n\n\n\n\n\n\n\n\n"],"names":["$bsOZu","parcelRequire","$74b95425b27bfa89$var$actionAdd","$74b95425b27bfa89$var$currentTaskEditId","$74b95425b27bfa89$var$todos","$74b95425b27bfa89$var$progress","$74b95425b27bfa89$var$done","$74b95425b27bfa89$export$d616d90bc69cd85e","document","querySelector","$74b95425b27bfa89$export$61605cd041f63b9e","showEditMenu","$74b95425b27bfa89$var$deleteCard","target","cardId","parentNode","getAttribute","cardIdx","findIndex","id","splice","$74b95425b27bfa89$var$renderTask","$74b95425b27bfa89$var$onEdit","item","itemId","title","innerHTML","desc","modalTitle","value","modalDesc","$74b95425b27bfa89$var$renderCounter","list","currentList","innerText","length","$74b95425b27bfa89$var$jumpToProgress","idItem","indexItem","push","tasksList","forEach","titleTask","description","time","colorItem","userName","task","createElement","classList","add","setAttribute","style","background","titlesBlock","user","actionsBlock","editBlock","btnEdit","addEventListener","btnDelete","btnJump","append","btnBack","btnComplete","btnDelete1","timeCreate","$74b95425b27bfa89$export$6312b3b8ade277da","options","hour","minute","date","Date","color","r","Math","floor","random","g","b","toString","$74b95425b27bfa89$var$randomRGB","todo","now","toLocaleString","currentUserName","currentTaskIdx","modalWrapper","remove"],"version":3,"file":"index.7d4ee044.js.map"}