{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAUA,IAAIC,GAAY,EACZC,EAAoB,EACxB,MAAMC,EAAaC,SAASC,cAAc,+BACpCC,EAAQ,GAed,SAASC,GAAWC,OAACA,IACjB,MACMC,GADOD,EAAOE,WAAWA,WAAWA,WACrBC,aAAa,MAC5BC,EAAUN,EAAMO,WAAU,EAACC,GAACA,KAAQA,IAAOL,IACjDH,EAAMS,OAAOH,EAAS,GACtBI,IAGJ,SAASC,GAAOT,OAACA,IACb,MAAMU,EAAOV,EAAOE,WAAWA,WAAWA,WACpCS,GAAUD,EAAKP,aAAa,MAClCT,EAAoBiB,EACpB,MAAMC,EAAQF,EAAKb,cAAc,2BAA2BgB,UACtDC,EAAOJ,EAAKb,cAAc,0BAA0BgB,UAC1DtB,EAAAwB,WAAWC,MAAQJ,EACnBrB,EAAA0B,UAAUD,MAAQF,EAClBrB,GAAY,EACZyB,QAAQC,IAAIzB,IACZ,EAAAH,EAAA6B,gBAUJ,SAASZ,EAAWa,EAAOvB,GACvB,MAAMwB,EAAY1B,SAASC,cAAc,eACzCyB,EAAUT,UAAY,GACtBQ,EAAKE,SAAQ,EAACjB,GAACA,EAAEkB,UAAEA,EAASC,YAAEA,EAAWC,KAAEA,EAAIC,UAAEA,MAC7C,MAAMC,EAAOhC,SAASiC,cAAc,MACpCD,EAAKE,UAAUC,IAAI,oBACnBH,EAAKI,aAAa,KAAM1B,GACxBsB,EAAKI,aAAa,aAAa,GAC/BJ,EAAKK,MAAMC,WAAaP,EAGxB,MAAMQ,EAAcvC,SAASiC,cAAc,OAC3CM,EAAYL,UAAUC,IAAI,2BAI1B,MAAMnB,EAAQhB,SAASiC,cAAc,KACrCjB,EAAMkB,UAAUC,IAAI,0BACpBnB,EAAMwB,UAAYZ,EAIlB,MAAMV,EAAOlB,SAASiC,cAAc,KACpCf,EAAKgB,UAAUC,IAAI,yBACnBjB,EAAKsB,UAAYX,EAGjB,MAAMY,EAAOzC,SAASiC,cAAc,KACpCQ,EAAKP,UAAUC,IAAI,yBACnBM,EAAKD,UAAY,GAIjB,MAAME,EAAe1C,SAASiC,cAAc,OAC5CS,EAAaR,UAAUC,IAAI,4BAI3B,MAAMQ,EAAY3C,SAASiC,cAAc,OACzCU,EAAUT,UAAUC,IAAI,oCAIxB,MAAMS,EAAU5C,SAASiC,cAAc,UACvCW,EAAQV,UAAUC,IAAI,iCACtBS,EAAQ3B,UAAY,OACpB2B,EAAQC,iBAAiB,QAAShC,GAElC,MAAMiC,EAAY9C,SAASiC,cAAc,UACzCa,EAAUZ,UAAUC,IAAI,mCACxBW,EAAU7B,UAAY,SACtB6B,EAAUD,iBAAiB,QAAS1C,GAEpC,MAAM4C,EAAU/C,SAASiC,cAAc,UACvCc,EAAQb,UAAUC,IAAI,iCACtBY,EAAQ9B,UAAY,IAIpB,MAAM+B,EAAahD,SAASiC,cAAc,KAC1Ce,EAAWd,UAAUC,IAAI,iCACzBa,EAAW/B,UAAYa,EAKvBS,EAAYU,OAAOjC,GACnBuB,EAAYU,OAAO/B,GACnBqB,EAAYU,OAAOR,GAInBE,EAAUM,OAAOL,GACjBD,EAAUM,OAAOH,GACjBJ,EAAaO,OAAON,GACpBD,EAAaO,OAAOF,GACpBL,EAAaO,OAAOD,GAGpBhB,EAAKiB,OAAOV,GACZP,EAAKiB,OAAOP,GAGZhB,EAAUuB,OAAOjB,MAxFLhC,SAASC,cAAc,8BAC/BgB,UAAYf,EAAMgD,OA6H9BnD,EAAW8C,iBAAiB,SAlK5B,WACIhD,GAAY,GACZ,EAAAF,EAAA6B,mBAiKJ7B,EAAAwD,gBAAgBN,iBAAiB,SA/BjC,WACI,GAAIhD,EAAW,CACX,IAAIuD,EAAU,CACVC,KAAM,UACNC,OAAQ,WAERC,EAAO,IAAIC,KACXC,EAtIZ,WACI,MAAMC,EAAIC,KAAKC,MAAuB,IAAjBD,KAAKE,UACpBC,EAAIH,KAAKC,MAAuB,IAAjBD,KAAKE,UACpBE,EAAIJ,KAAKC,MAAuB,IAAjBD,KAAKE,UAE1B,MADc,IAAIH,EAAEM,SAAS,MAAMF,EAAEE,SAAS,MAAMD,EAAEC,SAAS,MAkI/CC,GACRC,EAAO,CACPxD,GAAI8C,KAAKW,MACTvC,UAAWjC,EAAAwB,WAAWC,MACtBS,YAAalC,EAAA0B,UAAUD,MACvBU,KAAMyB,EAAKa,eAAe,KAAMhB,GAChCrB,UAAW0B,GAGfvD,EAAMmE,KAAKH,OAER,CACH,IAAII,EAAiBpE,EAAMO,WAAUuB,GAAQA,EAAKtB,KAAOZ,IACzDI,EAAMoE,GAAgB1C,UAAYjC,EAAAwB,WAAWC,MAC7ClB,EAAMoE,GAAgBzC,YAAclC,EAAA0B,UAAUD,MAElDE,QAAQC,IAAIrB,GACZU,IACAjB,EAAA4E,aAAarC,UAAUsC,OAAO,UAC9B7E,EAAAwB,WAAWC,MAAQ,GACnBzB,EAAA0B,UAAUD,MAAQ,M","sources":["src/components/Common.block/Card/card.js"],"sourcesContent":["import{\n    showEditMenu,  \n    showWarning, \n    modalTitle, \n    modalDesc,\n    modalWrapper,\n    modalBtnConfirm,\n\n} from '../modal/modal'\n\nlet actionAdd = false;\nlet currentTaskEditId = 0;\nconst btnAddTodo = document.querySelector('.item-todo__button-add-todo');\nconst todos = [];\n\nfunction addTodo() {\n    actionAdd = true;\n    showEditMenu();\n}\n\nfunction randomRGB() {\n    const r = Math.floor(Math.random() * (256)),\n          g = Math.floor(Math.random() * (256)),\n          b = Math.floor(Math.random() * (256)),\n          color = `#${r.toString(16)}${g.toString(16)}${b.toString(16)}`;\n    return color\n}\n\nfunction deleteCard({target}) {\n    const card = target.parentNode.parentNode.parentNode\n    const cardId = +card.getAttribute('id');\n    const cardIdx = todos.findIndex(({id}) => id === cardId);\n    todos.splice(cardIdx, 1);\n    renderTodo();\n}\n\nfunction onEdit({target}) {\n    const item = target.parentNode.parentNode.parentNode;\n    const itemId = +item.getAttribute('id');\n    currentTaskEditId = itemId;\n    const title = item.querySelector('.tasks-list__item-title').innerHTML;\n    const desc = item.querySelector('.tasks-list__item-desc').innerHTML;\n    modalTitle.value = title;\n    modalDesc.value = desc;\n    actionAdd = false;\n    console.log(currentTaskEditId)\n    showEditMenu();\n\n}\n\nfunction renderCounter() {\n    const counter = document.querySelector('.item-todo__header-counter');\n    counter.innerHTML = todos.length;\n    \n}\n\nfunction renderTodo(list = todos) {\n    const tasksList = document.querySelector('.tasks-list');\n    tasksList.innerHTML = '';\n    list.forEach(({id, titleTask, description, time, colorItem}) => {\n        const task = document.createElement('li');\n        task.classList.add('tasks-list__item');\n        task.setAttribute('id', id);\n        task.setAttribute('draggable', true);\n        task.style.background = colorItem;\n\n        // titles \n        const titlesBlock = document.createElement('div');\n        titlesBlock.classList.add('tasks-list__item-titles');\n        \n        // title \n\n        const title = document.createElement('p');\n        title.classList.add('tasks-list__item-title');\n        title.innerText = titleTask;\n\n        // desc\n\n        const desc = document.createElement('p');\n        desc.classList.add('tasks-list__item-desc');\n        desc.innerText = description;\n\n        // user \n        const user = document.createElement('p');\n        user.classList.add('tasks-list__item-user');\n        user.innerText = '';\n\n        // actions \n\n        const actionsBlock = document.createElement('div');\n        actionsBlock.classList.add('tasks-list__item-actions');\n\n        // editing block\n\n        const editBlock = document.createElement('div');\n        editBlock.classList.add('tasks-list__item-actions-editing');\n\n        // buttons\n\n        const btnEdit = document.createElement('button');\n        btnEdit.classList.add('tasks-list__item-actions-edit');\n        btnEdit.innerHTML = 'Edit';\n        btnEdit.addEventListener('click', onEdit);\n\n        const btnDelete = document.createElement('button');\n        btnDelete.classList.add('tasks-list__item-actions-delete');\n        btnDelete.innerHTML = 'Delete';\n        btnDelete.addEventListener('click', deleteCard);\n\n        const btnJump = document.createElement('button');\n        btnJump.classList.add('tasks-list__item-actions-jump');\n        btnJump.innerHTML = '>';\n\n        // time \n\n        const timeCreate = document.createElement('p');\n        timeCreate.classList.add('tasks-list__item-actions-time');\n        timeCreate.innerHTML = time;\n\n        // composite to list\n\n        // titles \n        titlesBlock.append(title);\n        titlesBlock.append(desc);\n        titlesBlock.append(user);\n\n        // actions \n\n        editBlock.append(btnEdit);\n        editBlock.append(btnDelete);\n        actionsBlock.append(editBlock);\n        actionsBlock.append(btnJump);\n        actionsBlock.append(timeCreate);\n        \n        // task \n        task.append(titlesBlock);\n        task.append(actionsBlock);\n\n        // list \n        tasksList.append(task);\n\n        })\n\n        \n    renderCounter();\n}\n\nfunction confirmAdd()  {\n    if (actionAdd) {\n        let options = {\n            hour: 'numeric',\n            minute: 'numeric',\n        }\n        let date = new Date();\n        let color = randomRGB();\n        let todo = {\n            id: Date.now(),\n            titleTask: modalTitle.value,\n            description: modalDesc.value,\n            time: date.toLocaleString('ru', options),\n            colorItem: color,\n        }\n\n        todos.push(todo);\n\n    } else {\n        let currentTaskIdx = todos.findIndex(task => task.id === currentTaskEditId)\n        todos[currentTaskIdx].titleTask = modalTitle.value;\n        todos[currentTaskIdx].description = modalDesc.value;\n    }\n    console.log(todos);\n    renderTodo();\n    modalWrapper.classList.remove('active');\n    modalTitle.value = '';\n    modalDesc.value = '';\n}\n\nbtnAddTodo.addEventListener('click', addTodo);\nmodalBtnConfirm.addEventListener('click', confirmAdd);\n\n\n\n\n"],"names":["$kfrop","parcelRequire","$952677fe81bb372d$var$actionAdd","$952677fe81bb372d$var$currentTaskEditId","$952677fe81bb372d$var$btnAddTodo","document","querySelector","$952677fe81bb372d$var$todos","$952677fe81bb372d$var$deleteCard","target","cardId","parentNode","getAttribute","cardIdx","findIndex","id","splice","$952677fe81bb372d$var$renderTodo","$952677fe81bb372d$var$onEdit","item","itemId","title","innerHTML","desc","modalTitle","value","modalDesc","console","log","showEditMenu","list","tasksList","forEach","titleTask","description","time","colorItem","task","createElement","classList","add","setAttribute","style","background","titlesBlock","innerText","user","actionsBlock","editBlock","btnEdit","addEventListener","btnDelete","btnJump","timeCreate","append","length","modalBtnConfirm","options","hour","minute","date","Date","color","r","Math","floor","random","g","b","toString","$952677fe81bb372d$var$randomRGB","todo","now","toLocaleString","push","currentTaskIdx","modalWrapper","remove"],"version":3,"file":"index.1fa8a1a8.js.map"}