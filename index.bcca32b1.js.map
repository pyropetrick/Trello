{"mappings":"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","sources":["src/components/Common.block/Card/card.js"],"sourcesContent":["import {\n    showEditMenu,\n    showWarning,\n    modalTitle,\n    modalDesc,\n    modalWrapper,\n    currentUserName,\n\n} from '../modal/modal';\n\nlet actionAdd = false;\nlet currentTaskEditId = 0;\nexport const btnAddTodo = document.querySelector('.item-todo__button-add-todo');\nconst todos = [];\nconst progress = [];\nconst done = [];\nexport function addTodo() {\n    actionAdd = true;\n    showEditMenu();\n}\n\nfunction randomRGB() {\n    const r = Math.floor(Math.random() * (256)),\n          g = Math.floor(Math.random() * (256)),\n          b = Math.floor(Math.random() * (256)),\n          color = `#${r.toString(16)}${g.toString(16)}${b.toString(16)}`;\n    return color\n}\n\nfunction deleteCard({target}) {\n    const card = target.parentNode.parentNode.parentNode\n    const cardId = +card.getAttribute('id');\n    const cardIdx = todos.findIndex(({id}) => id === cardId);\n    todos.splice(cardIdx, 1);\n    renderTask(todos, '.todos-list');\n}\n\nfunction onEdit({target}) {\n    const item = target.parentNode.parentNode.parentNode;\n    const itemId = +item.getAttribute('id');\n    currentTaskEditId = itemId;\n    const title = item.querySelector('.tasks-list__item-title').innerHTML;\n    const desc = item.querySelector('.tasks-list__item-desc').innerHTML;\n    modalTitle.value = title;\n    modalDesc.value = desc;\n    actionAdd = false;\n    showEditMenu();\n\n}\n\nfunction renderCounter(list) {\n    const counter = document.querySelector('.item-todo__header-counter');\n    counter.innerHTML = list.length;\n    \n}\nfunction jumpToProgress({ target }) {\n    const item = target.parentNode.parentNode;\n    const idItem = +item.getAttribute('id');\n    const indexItem = todos.findIndex(({id}) => id === idItem);\n    progress.push(todos[indexItem])\n    renderTask(progress, '.progress-list');\n    console.log(progress);\n    todos.splice(indexItem, 1);\n    renderTask(todos,'.todos-list');\n}\n\nfunction renderTask(list, currentList) {\n    const tasksList = document.querySelector(currentList);\n    tasksList.innerHTML = '';\n    list.forEach(({id, titleTask, description, time, colorItem, userName}) => {\n        const task = document.createElement('li');\n        task.classList.add('tasks-list__item');\n        task.setAttribute('id', id);\n        task.setAttribute('draggable', true);\n        task.style.background = colorItem;\n\n        // titles \n        const titlesBlock = document.createElement('div');\n        titlesBlock.classList.add('tasks-list__item-titles');\n        \n        // title \n\n        const title = document.createElement('p');\n        title.classList.add('tasks-list__item-title');\n        title.innerText = titleTask;\n\n        // desc\n\n        const desc = document.createElement('p');\n        desc.classList.add('tasks-list__item-desc');\n        desc.innerText = description;\n\n        // user \n        const user = document.createElement('p');\n        user.classList.add('tasks-list__item-user');\n        user.innerText = userName;\n\n        // actions \n\n        const actionsBlock = document.createElement('div');\n        actionsBlock.classList.add('tasks-list__item-actions');\n\n        // editing block\n\n        const editBlock = document.createElement('div');\n        editBlock.classList.add('tasks-list__item-actions-editing');\n\n        // buttons\n        if (currentList === '.todos-list') {\n            const btnEdit = document.createElement('button');\n            btnEdit.classList.add('tasks-list__item-actions-edit');\n            btnEdit.classList.add('button-card');\n            btnEdit.innerHTML = 'Edit';\n            btnEdit.addEventListener('click', onEdit);\n\n            const btnDelete = document.createElement('button');\n            btnDelete.classList.add('tasks-list__item-actions-delete');\n            btnDelete.classList.add('button-card');\n            btnDelete.innerHTML = 'Delete';\n            btnDelete.addEventListener('click', deleteCard);\n\n            const btnJump = document.createElement('button');\n            btnJump.classList.add('tasks-list__item-actions-jump');\n            btnJump.classList.add('button-card');\n            btnJump.innerHTML = '>';\n            btnJump.addEventListener('click', jumpToProgress);\n\n            editBlock.append(btnEdit);\n            editBlock.append(btnDelete);\n            actionsBlock.append(editBlock);\n            actionsBlock.append(btnJump);\n\n            renderCounter(todos);\n        }\n        else if (currentList === '.progress-list') {\n            const btnBack = document.createElement('button')\n            btnBack.classList.add('tasks-list__item-actions-back');\n            btnBack.classList.add('button-card');\n            btnBack.innerHTML = 'Back';\n\n            const btnComplete = document.createElement('button');\n            btnComplete.classList.add('tasks-list__item-actions-complete');\n            btnComplete.classList.add('button-card');\n            btnComplete.innerHTML = 'Complete';\n\n            editBlock.append(btnBack);\n            editBlock.append(btnComplete);\n            actionsBlock.append(editBlock);\n\n            renderCounter(progress);\n        }\n        else if (currentList === '.done-list') {\n            const btnDelete = document.createElement('button');\n            btnDelete.classList.add('tasks-list__item-actions-delete');\n            btnDelete.classList.add('button-card');\n            btnDelete.innerHTML = 'Delete';\n            btnDelete.addEventListener('click', deleteCard);\n\n            editBlock.append(btnDelete);\n            actionsBlock.append(editBlock);\n            renderCounter(done);\n        }\n\n        // time \n\n        const timeCreate = document.createElement('p');\n        timeCreate.classList.add('tasks-list__item-actions-time');\n        timeCreate.innerHTML = time;\n\n        // composite to list\n\n        // titles \n        titlesBlock.append(title);\n        titlesBlock.append(desc);\n        titlesBlock.append(user);\n\n        // actions\n        actionsBlock.append(timeCreate);\n        \n        // task \n        task.append(titlesBlock);\n        task.append(actionsBlock);\n\n        // list \n        tasksList.append(task);\n\n        })\n\n        \n\n}\n\nexport function onConfirm()  {\n    if (actionAdd) {\n        let options = {\n            hour: 'numeric',\n            minute: 'numeric',\n        }\n        let date = new Date();\n        let color = randomRGB();\n        let todo = {\n            id: Date.now(),\n            titleTask: modalTitle.value,\n            description: modalDesc.value,\n            time: date.toLocaleString('ru', options),\n            colorItem: color,\n            userName: currentUserName,\n        }\n\n        todos.push(todo);\n\n    } else {\n        let currentTaskIdx = todos.findIndex(task => task.id === currentTaskEditId)\n        todos[currentTaskIdx].titleTask = modalTitle.value;\n        todos[currentTaskIdx].description = modalDesc.value;\n        todos[currentTaskIdx].userName = currentUserName;    }\n    renderTask(todos,'.todos-list');\n    modalWrapper.classList.remove('active');\n    modalTitle.value = '';\n    modalDesc.value = '';\n}\n\n\n\n\n\n\n\n\n\n\n"],"names":["$bsOZu","parcelRequire","$74b95425b27bfa89$var$actionAdd","$74b95425b27bfa89$var$currentTaskEditId","$74b95425b27bfa89$export$d616d90bc69cd85e","document","querySelector","$74b95425b27bfa89$var$todos","$74b95425b27bfa89$var$progress","$74b95425b27bfa89$var$done","$74b95425b27bfa89$export$61605cd041f63b9e","showEditMenu","$74b95425b27bfa89$var$deleteCard","target","cardId","parentNode","getAttribute","cardIdx","findIndex","id","splice","$74b95425b27bfa89$var$renderTask","$74b95425b27bfa89$var$onEdit","item","itemId","title","innerHTML","desc","modalTitle","value","modalDesc","$74b95425b27bfa89$var$renderCounter","list","length","$74b95425b27bfa89$var$jumpToProgress","idItem","indexItem","push","console","log","currentList","tasksList","forEach","titleTask","description","time","colorItem","userName","task","createElement","classList","add","setAttribute","style","background","titlesBlock","innerText","user","actionsBlock","editBlock","btnEdit","addEventListener","btnDelete","btnJump","append","btnBack","btnComplete","btnDelete1","timeCreate","$74b95425b27bfa89$export$6312b3b8ade277da","options","hour","minute","date","Date","color","r","Math","floor","random","g","b","toString","$74b95425b27bfa89$var$randomRGB","todo","now","toLocaleString","currentUserName","currentTaskIdx","modalWrapper","remove"],"version":3,"file":"index.bcca32b1.js.map"}